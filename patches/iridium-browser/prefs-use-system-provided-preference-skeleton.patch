From 48129805f22c69561912bcfe49c07ad291db1e8a Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Thu, 29 Jan 2015 10:36:43 +0100
Subject: [PATCH 31/56] prefs: use system-provided preference skeleton

This patch makes it possible for distributions to have a global
default preferences file in /etc/iridium-browser/preferences that get
copied over to ~ when the user starts the program for the first time.
---
 chrome/browser/first_run/first_run_internal_linux.cc | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/chrome/browser/first_run/first_run_internal_linux.cc b/chrome/browser/first_run/first_run_internal_linux.cc
index f2441e2..abfafcd 100644
--- a/chrome/browser/first_run/first_run_internal_linux.cc
+++ b/chrome/browser/first_run/first_run_internal_linux.cc
@@ -20,8 +20,12 @@ bool IsOrganicFirstRun() {
 base::FilePath MasterPrefsPath() {
   // The standard location of the master prefs is next to the chrome binary.
   base::FilePath master_prefs;
+#ifndef ANDROID
+  master_prefs = base::FilePath("/etc/iridium-browser");
+#else
   if (!PathService::Get(base::DIR_EXE, &master_prefs))
     return base::FilePath();
+#endif
   return master_prefs.AppendASCII(installer::kDefaultMasterPrefs);
 }
 
-- 
2.4.3

