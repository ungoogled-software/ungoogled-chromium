From 93350ce4bac40a717803b0d61133197fe7f3cf75 Mon Sep 17 00:00:00 2001
From: Joachim Bauch <bauch@struktur.de>
Date: Wed, 15 Apr 2015 15:19:21 +0200
Subject: [PATCH 33/57] plugin: do not load any system-provided plugins on
 Windows

---
 content/common/plugin_list_win.cc | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/content/common/plugin_list_win.cc b/content/common/plugin_list_win.cc
index e96cc05..17fce0d 100644
--- a/content/common/plugin_list_win.cc
+++ b/content/common/plugin_list_win.cc
@@ -318,6 +318,7 @@ void PluginList::GetPluginDirectories(
   // Load from the executable area
   GetExeDirectory(&dirs);
 
+#if 0 /* NOTE: Iridium is not to load any system-provided plugins */
   // Load Java
   GetJavaDirectory(&dirs);
 
@@ -330,6 +331,7 @@ void PluginList::GetPluginDirectories(
   GetAcrobatDirectory(&dirs);
   GetQuicktimeDirectory(&dirs);
   GetWindowsMediaDirectory(&dirs);
+#endif
 
   for (std::set<base::FilePath>::iterator i = dirs.begin(); i != dirs.end(); ++i)
     plugin_dirs->push_back(*i);
@@ -366,6 +368,7 @@ void PluginList::GetPluginPathsFromRegistry(
 
   std::set<base::FilePath> plugin_dirs;
 
+#if 0 /* NOTE: Iridium is not to load any system-provided plugins */
   // Search for plugins from HKCU and HKLM.  THis will only find plugins that
   // are correctly registered in the correct WOW64 registry hive.
   GetPluginsInRegistryDirectory(HKEY_CURRENT_USER,
@@ -376,6 +379,7 @@ void PluginList::GetPluginPathsFromRegistry(
                                 kRegistryMozillaPlugins,
                                 0,
                                 &plugin_dirs);
+#endif
 
   for (std::set<base::FilePath>::iterator i = plugin_dirs.begin();
        i != plugin_dirs.end(); ++i) {
-- 
2.6.2

